<nb-layout>
  <nb-sidebar>
    <nb-list>
      <nb-list-item *ngFor="let u of users | async">
        <button
          nbButton
          fullwidth
          (click)="UserClicked(u)"
          *ngIf="user.uid != u.uid"
        >
          <nb-user [name]="u.displayName" [picture]="u.photoURL"></nb-user>
        </button>
      </nb-list-item>
    </nb-list>
  </nb-sidebar>

  <nb-layout-column>
    <nb-card>
      <nb-card-body>
        <nb-user [name]="selectedUser" [picture]="avatar"></nb-user>
      </nb-card-body>
    </nb-card>

    <nb-chat size="large">
      <nb-chat-message
        *ngFor="let msg of messages | async"
        type="msg.type"
        [message]="msg.content"
        [date]="msg.time"
        [avatar]="msg.avatar"
       [reply]="msg.reply"
       [files]="[ { url: 'msg.url', type: 'image/jpeg' } ]"
      >
      </nb-chat-message>
      <!-- <nb-chat-message
       
      message="Image message"
      type="file"
      sender="John Doe"
      [reply]="true"
      [date]="date"
      [files]="[ { url: 'https://firebasestorage.googleapis.com/v0/b/lk-agro-market.appspot.com/o/test?alt=media&token=1479880b-7152-4bf1-8995-0870e95da820', type: 'image/jpeg' } ]"
      >
      </nb-chat-message> -->
      <nb-chat-form (send)="sendMessage($event)" [dropFiles]="true">
      </nb-chat-form>
    </nb-chat>

    <nb-card>
      <nb-card-body>
          <input type="file" (change)="uploadFile($event)" accept=".png,.jpg,.pdf,.mp4,.mp3,.docx,.pptx,.gif" />
      </nb-card-body>
    </nb-card>
  </nb-layout-column>
</nb-layout>
