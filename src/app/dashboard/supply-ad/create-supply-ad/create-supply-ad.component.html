<nb-card
  accent="info"
  [nbSpinner]="processing"
  nbSpinnerStatus="primary"
  nbSpinnerSize="large"
>
  <nb-card-header class="card-header-content">
    {{ 'farmer.title' | translate }}
  </nb-card-header>
  <nb-card-body>
    <form [formGroup]="supplyAdForm" (ngSubmit)="createSupplyAd()">
      <div class="row">
        <div class="col-sm-6">
          <label>{{ 'farmer.form.catogary' | translate }}</label>
          <div class="form-group">
            <nb-select
              fullWidth
              placeholder="{{ 'farmer.placeholder.catogary' | translate }}"
              (selectedChange)="retriveFoods()"
              formControlName="type"
            >
              <nb-option *ngFor="let t of types" [value]="t">{{ t }}</nb-option>
            </nb-select>
            <div
              *ngIf="attempted && !!formControls.type.errors"
              class="text-danger"
            >
              <span *ngIf="!!formControls.type.errors.required">{{
                'farmer.required.catogary' | translate
              }}</span>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label>{{ 'farmer.form.product' | translate }}</label>
            <nb-select
              fullWidth
              placeholder="{{ 'farmer.placeholder.product' | translate }}"
              formControlName="food"
            >
              <nb-option *ngFor="let f of relatedFoods" [value]="f">{{
                f
              }}</nb-option>
            </nb-select>
            <div
              *ngIf="attempted && !!formControls.food.errors"
              class="text-danger"
            >
              <span *ngIf="!!formControls.food.errors.required">{{
                'farmer.required.product' | translate
              }}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <div class="form-group">
            <label>{{ 'farmer.form.quentity' | translate }}</label>
            <input
              type="text"
              nbInput
              fullWidth
              formControlName="quantity"
              placeholder="{{ 'farmer.placeholder.amount' | translate }}"
            />
            <div
              *ngIf="attempted && !!formControls.quantity.errors"
              class="text-danger"
            >
              <span *ngIf="!!formControls.quantity.errors.required">{{
                'farmer.required.amount' | translate
              }}</span>
            </div>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="form-group">
            <label>{{ 'farmer.form.unit' | translate }}</label>
            <input
              type="text"
              nbInput
              fullWidth
              formControlName="quantityUnit"
              placeholder="{{ 'farmer.placeholder.unit' | translate }}"
            />
            <div
              *ngIf="attempted && !!formControls.quantityUnit.errors"
              class="text-danger"
            >
              <span *ngIf="!!formControls.quantityUnit.errors.required">{{
                'farmer.required.unit' | translate
              }}</span>
            </div>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="form-group">
            <label>{{ 'farmer.form.price' | translate }}</label>
            <input
              type="text"
              nbInput
              fullWidth
              formControlName="pricePerUnit"
              placeholder="{{ 'farmer.placeholder.price' | translate }}"
            />
            <div
              *ngIf="attempted && !!formControls.pricePerUnit.errors"
              class="text-danger"
            >
              <span *ngIf="!!formControls.pricePerUnit.errors.required">{{
                'farmer.required.price' | translate
              }}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label>{{ 'farmer.form.image.mainimage' | translate }}</label>
            <input
              type="file"
              nbInput
              fullWidth
              accept=".jpeg,.jpg,.bmp,.png"
              (change)="file1ChangeEvent($event)"
            />
            <image-cropper
              [imageChangedEvent]="image1ChangedEvent"
              [maintainAspectRatio]="true"
              [aspectRatio]="4 / 3"
              format="jpeg"
              outputType="file"
              (imageCropped)="image1Cropped($event)"
            ></image-cropper>
            <img class="imagePreview" [src]="image1LL" />
            <div *ngIf="attempted" class="text-danger">
              <span *ngIf="!supplyAdForm.value.image1">
                {{ 'farmer.required.image' | translate }}
              </span>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label>{{ 'farmer.form.image.image2' | translate }}</label>
            <input
              type="file"
              nbInput
              fullWidth
              accept=".jpeg,.jpg,.bmp,.png"
              (change)="file2ChangeEvent($event)"
            />
            <image-cropper
              [imageChangedEvent]="image2ChangedEvent"
              [maintainAspectRatio]="true"
              [aspectRatio]="4 / 3"
              format="jpeg"
              outputType="file"
              (imageCropped)="image2Cropped($event)"
            ></image-cropper>
            <img class="imagePreview" [src]="image2LL" />
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label>{{ 'farmer.form.image.image3' | translate }}</label>
            <input
              type="file"
              nbInput
              fullWidth
              accept=".jpeg,.jpg,.bmp,.png"
              (change)="file3ChangeEvent($event)"
            />
            <image-cropper
              [imageChangedEvent]="image3ChangedEvent"
              [maintainAspectRatio]="true"
              [aspectRatio]="4 / 3"
              format="jpeg"
              outputType="file"
              (imageCropped)="image3Cropped($event)"
            ></image-cropper>
            <img class="imagePreview" [src]="image3LL" />
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label>{{ 'farmer.form.image.image4' | translate }}</label>
            <input
              type="file"
              nbInput
              fullWidth
              accept=".jpeg,.jpg,.bmp,.png"
              (change)="file4ChangeEvent($event)"
            />
            <image-cropper
              [imageChangedEvent]="image4ChangedEvent"
              [maintainAspectRatio]="true"
              [aspectRatio]="4 / 3"
              format="jpeg"
              outputType="file"
              (imageCropped)="image4Cropped($event)"
            ></image-cropper>
            <img class="imagePreview" [src]="image4LL" />
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <div class="form-group">
            <label>{{ 'farmer.form.description' | translate }}</label>
            <textarea
              nbInput
              fullWidth
              formControlName="description"
              placeholder="{{ 'farmer.placeholder.description' | translate }}"
            ></textarea>
            <div
              *ngIf="attempted && !!formControls.description.errors"
              class="text-danger"
            >
              <span *ngIf="!!formControls.description.errors.required"
                >{{ 'farmer.required.description' | translate }}
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <label>{{ 'farmer.form.type' | translate }}</label>
          <div class="form-group">
            <nb-select
              fullWidth
              placeholder="{{ 'farmer.placeholder.type' | translate }}"
              formControlName="organic"
            >
              <nb-option value="Organic">Organic</nb-option>
              <nb-option value="Inorganic">Inorganic</nb-option>
            </nb-select>
            <div
              *ngIf="attempted && !!formControls.organic.errors"
              class="text-danger"
            >
              <span *ngIf="!!formControls.organic.errors.required">{{
                'farmer.required.type' | translate
              }}</span>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label>{{ 'farmer.form.deadline' | translate }}</label>
            <input
              nbInput
              fullWidth
              type="date"
              placeholder="Pick ad expire date"
              formControlName="expireDate"
            />
            <div
              *ngIf="attempted && !!formControls.expireDate.errors"
              class="text-danger"
            >
              <span *ngIf="!!formControls.expireDate.errors.required">{{
                'farmer.required.date' | translate
              }}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12 text-right">
          <button type="submit" nbButton>
            {{ 'farmer.form.button' | translate }}
          </button>
        </div>
      </div>
    </form>
  </nb-card-body>
</nb-card>
